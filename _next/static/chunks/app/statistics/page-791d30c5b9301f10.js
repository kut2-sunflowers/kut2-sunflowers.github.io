(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[894],{46001:(e,t,a)=>{Promise.resolve().then(a.bind(a,69594))},69594:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>C});var l=a(57437),s=a(2265),r=a(35231),i=a(27561),c=a(54142),n=a(2842),o=a(9542),d=a(85475),h=a(86991),m=a(74002);function x(e){let{filterCondition:t,cameraId:a,timeRange:x}=e,[u,f]=(0,s.useState)([]),j=async(e,t,a)=>{try{let l=await fetch("".concat("http://localhost:8004","/vehicle-total-counts-per-minute?cameraId=").concat(e,"&startTime=").concat(t,"&endTime=").concat(a)),s=await l.json();s.sort((e,t)=>{let a=new Date(e.timestamp.replace(" ","T")).getTime(),l=new Date(t.timestamp.replace(" ","T")).getTime();return a-l}),f(s),console.log(s)}catch(e){console.error("Error fetching data:",e)}};return(0,s.useEffect)(()=>{t&&2===x.length&&j(a,x[0],x[1])},[t,a,x]),(0,l.jsx)(l.Fragment,{children:t&&(0,l.jsxs)("div",{className:"rounded-xl w-full h-full p-4 border border-[#b2c7ba]",children:[(0,l.jsxs)("div",{className:"flex pb-3 justify-between items-center",children:[(0,l.jsx)("h1",{className:"text-lg font-semibold",children:"Traffic Density"}),(0,l.jsx)(m.Z,{width:20,height:20})]}),t&&(0,l.jsx)("div",{className:"w-full h-[90%]",children:(0,l.jsx)(r.h,{children:(0,l.jsxs)(i.T,{width:500,height:400,data:u,margin:{top:10,right:30,left:0,bottom:0},children:[(0,l.jsx)(c.q,{strokeDasharray:"3 3"}),(0,l.jsx)(n.K,{dataKey:"timestamp"}),(0,l.jsx)(o.B,{dataKey:"totalVehicle"}),(0,l.jsx)(d.u,{}),(0,l.jsx)(h.u,{type:"monotone",dataKey:"totalVehicle",stroke:"#eb1607",fill:"#fc1900"})]})})})]})})}var u=a(25974),f=a(20153),j=a(28997);function g(e){let{filterCondition:t,cameraId:a,timeRange:i}=e,[h,x]=(0,s.useState)([]),g={"xe buyt":"bus","xe container":"container","xe cuu hoa":"fire truck","xe dap":"bicycle","xe hoi":"car","xe may":"motorbike","xe tai":"truck","xe van":"van"},p=Object.values(g),w=["#00FFFF","#E0FFFF","#AFEEEE","#7FFFD4","#40E0D0","#48D1CC","#00CED1","#20B2AA"],b=async(e,t,a)=>{try{let l=await fetch("".concat("http://localhost:8004","/vehicle-type-counts-per-minute?cameraId=").concat(e,"&startTime=").concat(t,"&endTime=").concat(a)),s=(await l.json()).sort((e,t)=>{let a=new Date(e.timestamp.replace(" ","T")).getTime(),l=new Date(t.timestamp.replace(" ","T")).getTime();return a-l}).map(e=>{let t={...e};return Object.keys(g).forEach(e=>{void 0!==t[e]&&(t[g[e]]=t[e],delete t[e])}),t});x(s),console.log(s)}catch(e){console.error("Error fetching data:",e)}};return(0,s.useEffect)(()=>{t&&2===i.length&&b(a,i[0],i[1])},[t,a,i]),(0,l.jsx)(l.Fragment,{children:t&&(0,l.jsxs)("div",{className:"rounded-xl w-full h-full p-4 border border-[#b2c7ba]",children:[(0,l.jsxs)("div",{className:"flex pb-2 justify-between items-center",children:[(0,l.jsx)("h1",{className:"text-lg font-semibold",children:"Vehicle Count"}),(0,l.jsx)(m.Z,{width:20,height:20})]}),(0,l.jsx)("div",{className:"w-full h-[90%]",children:(0,l.jsx)(r.h,{children:(0,l.jsxs)(u.v,{width:500,height:300,data:h,margin:{top:20,right:30,left:20,bottom:5},children:[(0,l.jsx)(c.q,{strokeDasharray:"3 3"}),(0,l.jsx)(n.K,{dataKey:"timestamp"}),(0,l.jsx)(o.B,{}),(0,l.jsx)(d.u,{}),(0,l.jsx)(f.D,{}),p.map((e,t)=>h.some(t=>t[e]>0)?(0,l.jsx)(j.$,{dataKey:e,stackId:"a",fill:w[t%w.length]},t):null)]})})})]})})}var p=a(74224);let{RangePicker:w}=a(17799).default;function b(e){let{onCalenderChange:t}=e;return(0,l.jsx)("div",{children:(0,l.jsx)(w,{showTime:{format:"HH:mm"},format:"YYYY-MM-DD HH:mm",onChange:(e,a)=>{console.log("Selected Time: ",e),console.log("Formatted Selected Time: ",a),t(a)},onOk:e=>{console.log("onOk: ",e)}})})}var v=a(74051);function y(e){let{filterCondition:t,cameraId:a,timeRange:i}=e,[h,x]=(0,s.useState)([]),g=["#006400","#228B22","#32CD32","#3CB371","#66CDAA","#8FBC8F","#20B2AA","#2E8B57","#98FB98","#00FF7F","#7CFC00","#00FA9A","#ADFF2F","#7FFF00"],p=async(e,t,a)=>{try{let l=await fetch("".concat("http://localhost:8004","/vehicle-brand-counts-per-minute?cameraId=").concat(e,"&startTime=").concat(t,"&endTime=").concat(a)),s=await l.json();s.sort((e,t)=>{let a=new Date(e.timestamp.replace(" ","T")).getTime(),l=new Date(t.timestamp.replace(" ","T")).getTime();return a-l}),x(s),console.log(s)}catch(e){console.error("Error fetching data:",e)}};return(0,s.useEffect)(()=>{t&&2===i.length&&p(a,i[0],i[1])},[t,a,i]),(0,l.jsx)(l.Fragment,{children:t&&(0,l.jsxs)("div",{className:"rounded-xl w-full h-full p-4 border border-[#b2c7ba]",children:[(0,l.jsxs)("div",{className:"flex pb-2 justify-between items-center",children:[(0,l.jsx)("h1",{className:"text-lg font-semibold",children:"Make Count"}),(0,l.jsx)(m.Z,{width:20,height:20})]}),(0,l.jsx)("div",{className:"w-full h-[90%]",children:(0,l.jsx)(r.h,{children:(0,l.jsxs)(u.v,{width:500,height:300,data:h,margin:{top:20,right:30,left:20,bottom:5},children:[(0,l.jsx)(c.q,{strokeDasharray:"3 3"}),(0,l.jsx)(n.K,{dataKey:"timestamp"}),(0,l.jsx)(o.B,{}),(0,l.jsx)(d.u,{}),(0,l.jsx)(f.D,{}),["Hyundai","Mazda","Honda","Toyota","Ford","Mercedes","Mitsubishi","Lexus","Kia","Nissan","Vinfast","BMW","Peugeot","Fiat"].map((e,t)=>h.some(t=>t[e]>0)?(0,l.jsx)(j.$,{dataKey:e,stackId:"a",fill:g[t%g.length]},t):null)]})})})]})})}var F=a(1883),N=a(95956);function C(){let[e,t]=(0,s.useState)(null),[a,r]=(0,s.useState)(""),[i,c]=(0,s.useState)(0),[n,o]=(0,s.useState)([]),[d,h]=(0,s.useState)(!1);return(0,l.jsxs)("div",{className:"p-4",children:[(0,l.jsx)("h1",{className:"text-3xl pb-5 text-[#14532d] font-bold",children:"Statistics"}),(0,l.jsx)("div",{className:"text-xl pb-2",children:"Filter"}),(0,l.jsx)("div",{className:"flex gap-5 pb-10 flex-col lg:flex-row",children:(0,l.jsxs)(v.ZP,{theme:{token:{colorPrimary:"#3da64a"}},children:[(0,l.jsx)(p.Z,{onChange:(e,a)=>{if(h(!1),t(a),a&&a.length>0){let e=a.map(e=>e.label).join(" / "),t=a.map(e=>e.value).join(" / ");r(e),c(t)}else r(""),c(0)}}),(0,l.jsx)(b,{onCalenderChange:e=>{o(e)}}),(0,l.jsx)(F.Z,{onClick:()=>{console.log("Filter clicked with location:",e),console.log("Filter clicked with date time:",n),console.log("Selected location label:",a),console.log("Selected location value:",i),e&&2===n.length?h(!0):N.Am.error("Please select location and time range to apply filter.")}})]})}),(0,l.jsx)("div",{className:"w-full h-[370px] pb-5",children:(0,l.jsx)(x,{filterCondition:d,cameraId:i,timeRange:n})}),(0,l.jsxs)("div",{className:"flex gap-5 flex-col lg:flex-row",children:[(0,l.jsx)("div",{className:"w-full lg:w-1/2 h-[270px]",children:(0,l.jsx)(g,{filterCondition:d,cameraId:i,timeRange:n})}),(0,l.jsx)("div",{className:"w-full lg:w-1/2 h-[270px]",children:(0,l.jsx)(y,{filterCondition:d,cameraId:i,timeRange:n})})]})]})}},1883:(e,t,a)=>{"use strict";a.d(t,{Z:()=>c});var l=a(57437),s=a(74051),r=a(17715);a(2265);var i=a(95956);function c(e){let{onClick:t}=e;return(0,l.jsxs)(s.ZP,{theme:{token:{colorPrimary:"#3da64a"}},children:[(0,l.jsx)(r.ZP,{className:"w-[150px]",type:"primary",onClick:t,children:(0,l.jsx)("div",{className:"font-semibold",children:"Apply filter"})}),(0,l.jsx)(i.Ix,{})]})}a(53982)},74224:(e,t,a)=>{"use strict";a.d(t,{Z:()=>i});var l=a(57437),s=a(2265),r=a(93317);function i(e){let{onChange:t}=e,[a,i]=(0,s.useState)([]),c=async()=>{try{let e=await fetch("http://localhost:8004/"),t=await e.json();i(t),console.log(t)}catch(e){console.error("Error fetching data:",e)}};return(0,s.useEffect)(()=>{c()},[]),(0,l.jsx)("div",{className:"w-1/2",children:(0,l.jsx)(r.Z,{style:{width:"100%"},options:a.map(e=>({value:e.recordId,label:e.cameraName})),onChange:t,placeholder:"Location",showSearch:{filter:(e,t)=>t.some(t=>t.label.toLowerCase().indexOf(e.toLowerCase())>-1)},onSearch:e=>console.log(e)})})}}},e=>{var t=t=>e(e.s=t);e.O(0,[265,733,7,723,790,497,799,780,130,215,744],()=>t(46001)),_N_E=e.O()}]);