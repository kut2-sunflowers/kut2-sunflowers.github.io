(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[549],{21025:(e,t,l)=>{Promise.resolve().then(l.bind(l,9622))},9622:(e,t,l)=>{"use strict";l.r(t),l.d(t,{default:()=>m});var o=l(57437),c=l(74051),a=l(2265),n=l(74224),r=l(17799);function s(e){let{onCalenderChange:t}=e;return(0,o.jsx)("div",{children:(0,o.jsx)(r.default,{showTime:!0,format:"YYYY-MM-DD HH:mm",onChange:(e,l)=>{console.log("Selected Time: ",e),console.log("Formatted Selected Time: ",l),t(l)},onOk:e=>{console.log("onOk: ",e)}})})}var i=l(1883),d=l(95956);let h=e=>{let{filterCondition:t,selectedLocationValue:l,selectedTime:c,setSelectedObject:n}=e,[r,s]=(0,a.useState)(null),[i,d]=(0,a.useState)([]),[h,u]=(0,a.useState)(null),f=(0,a.useRef)(null),m=(0,a.useRef)(1),x=(0,a.useRef)(1),p=async(e,t)=>{try{let l=await fetch("".concat("http://localhost:8004","/").concat(e,"/frame?timestamp=").concat(t)),o=await l.blob(),c=URL.createObjectURL(o);s(c),console.log(c);let a=await fetch("".concat("http://localhost:8004","/").concat(e,"/frame/details?timestamp=").concat(t)),n=await a.json();d(n),console.log(n)}catch(e){console.error("Error fetching data:",e)}};return(0,a.useEffect)(()=>{t&&l&&c&&(p(l,c),u(null),n(null))},[t,l,c]),(0,a.useEffect)(()=>{if(r&&i.length>0){let e=f.current,t=e.getContext("2d"),l=new window.Image;l.src=r,l.onload=()=>{e.width=700,e.height=390,m.current=e.width/l.width,x.current=e.height/l.height,t.drawImage(l,0,0,e.width,e.height),i.forEach((e,l)=>{t.strokeStyle=l===h?"red":"green",t.lineWidth=2;let o=e.topLeftX*m.current,c=e.topLeftY*x.current,a=(e.bottomRightX-e.topLeftX)*m.current,n=(e.bottomRightY-e.topLeftY)*x.current;t.strokeRect(o,c,a,n),console.log("Drawing rectangle:",o,c,a,n)})}}},[r,i,h]),(0,o.jsx)("div",{children:t&&r&&(0,o.jsx)("canvas",{ref:f,onClick:e=>{let t=f.current.getBoundingClientRect(),l=e.clientX-t.left,o=e.clientY-t.top;i.forEach((e,t)=>{l>=e.topLeftX*m.current&&l<=e.topLeftX*m.current+(e.bottomRightX-e.topLeftX)*m.current&&o>=e.topLeftY*x.current&&o<=e.topLeftY*x.current+(e.bottomRightY-e.topLeftY)*x.current&&(u(t),n(i[t]))})}})})};var u=l(50825);let f=e=>{let{filterCondition:t,selectedObject:l}=e;return(0,o.jsx)("div",{children:t&&l&&(0,o.jsxs)(u.Z,{className:"w-[300px] h-[170px]",children:[(0,o.jsx)("h1",{className:"text-lg text-center text-[#14532d] font-bold pb-5",children:"Vehicle detail"}),(0,o.jsxs)("p",{className:"pb-1",children:["Brand: ",l.vehicleBrand]}),(0,o.jsxs)("p",{className:"pb-1",children:["Model: ",l.vehicleModel]}),(0,o.jsxs)("p",{className:"pb-1",children:["Type: ",l.vehicleType]})]})})};function m(){let[e,t]=(0,a.useState)(null),[l,r]=(0,a.useState)(""),[u,m]=(0,a.useState)(0),[x,p]=(0,a.useState)(""),[g,j]=(0,a.useState)(null),[w,v]=(0,a.useState)(!1);return(0,o.jsxs)("div",{className:"p-4",children:[(0,o.jsx)("h1",{className:"text-3xl pb-5 text-[#14532d] font-bold",children:"Details"}),(0,o.jsx)("div",{className:"text-xl pb-2",children:"Filter"}),(0,o.jsx)("div",{className:"flex gap-5 pb-10 flex-col lg:flex-row",children:(0,o.jsxs)(c.ZP,{theme:{token:{colorPrimary:"#3da64a"}},children:[(0,o.jsx)(n.Z,{onChange:(e,l)=>{if(v(!1),t(l),l&&l.length>0){let e=l.map(e=>e.label).join(" / "),t=l.map(e=>e.value).join(" / ");r(e),m(t)}else r("")}}),(0,o.jsx)(s,{onCalenderChange:e=>{p(e)}}),(0,o.jsx)(i.Z,{onClick:()=>{console.log("Filter clicked with location:",e),console.log("Filter clicked with date time:",x),console.log("Selected location label:",l),console.log("Selected location value:",u),e&&x?v(!0):d.Am.error("Please select location and time to apply filter.")}})]})}),(0,o.jsxs)("div",{className:"flex gap-10 flex-col lg:flex-row",children:[(0,o.jsx)("div",{children:(0,o.jsx)(h,{filterCondition:w,selectedLocationValue:u,selectedTime:x,setSelectedObject:j})}),(0,o.jsx)("div",{children:(0,o.jsx)(f,{filterCondition:w,selectedObject:g})})]})]})}},1883:(e,t,l)=>{"use strict";l.d(t,{Z:()=>r});var o=l(57437),c=l(74051),a=l(17715);l(2265);var n=l(95956);function r(e){let{onClick:t}=e;return(0,o.jsxs)(c.ZP,{theme:{token:{colorPrimary:"#3da64a"}},children:[(0,o.jsx)(a.ZP,{className:"w-[150px]",type:"primary",onClick:t,children:(0,o.jsx)("div",{className:"font-semibold",children:"Apply filter"})}),(0,o.jsx)(n.Ix,{})]})}l(53982)},74224:(e,t,l)=>{"use strict";l.d(t,{Z:()=>n});var o=l(57437),c=l(2265),a=l(93317);function n(e){let{onChange:t}=e,[l,n]=(0,c.useState)([]),r=async()=>{try{let e=await fetch("http://localhost:8004/"),t=await e.json();n(t),console.log(t)}catch(e){console.error("Error fetching data:",e)}};return(0,c.useEffect)(()=>{r()},[]),(0,o.jsx)("div",{className:"w-1/2",children:(0,o.jsx)(a.Z,{style:{width:"100%"},options:l.map(e=>({value:e.recordId,label:e.cameraName})),onChange:t,placeholder:"Location",showSearch:{filter:(e,t)=>t.some(t=>t.label.toLowerCase().indexOf(e.toLowerCase())>-1)},onSearch:e=>console.log(e)})})}}},e=>{var t=t=>e(e.s=t);e.O(0,[265,733,7,723,790,497,799,802,512,825,130,215,744],()=>t(21025)),_N_E=e.O()}]);