(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[195],{84141:(e,t,a)=>{Promise.resolve().then(a.bind(a,87737))},87737:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>u});var r=a(57437),l=a(74051),s=a(2265),o=a(74224),n=a(1883),i=a(67432),c=a.n(i);let d=e=>{let{selectedLocationLabel:t,filterCondition:a}=e,[l,o]=(0,s.useState)([]),[n,i]=(0,s.useState)(null),[d,h]=(0,s.useState)(null),u=async()=>{try{let e=await fetch("http://localhost:8004/"),t=await e.json();o(t),console.log(t)}catch(e){console.error("Error fetching data:",e)}};(0,s.useEffect)(()=>{u()},[]),(0,s.useEffect)(()=>{if(a&&t&&l.find(e=>e.cameraName===t).streamingApi){d&&d.close(),n&&n.destroy();let e=new(c())({node:"player",mode:"video",flushingTime:3e3,maxDelay:3e3,fps:25,debug:!1,onError:t=>{/Safari/.test(navigator.userAgent)&&/Apple Computer/.test(navigator.vendor)&&e.reset()}});i(e);let a=new WebSocket(l.find(e=>e.cameraName===t).streamingApi);return a.binaryType="arraybuffer",a.addEventListener("open",()=>{console.log("Connected"),a.send("")}),a.addEventListener("message",t=>{let a=new Uint8Array(t.data);e.feed({video:f(a)})}),a.addEventListener("error",()=>{console.log("Socket Error")}),h(a),()=>{a&&a.close(),e&&e.destroy()}}},[a,t,l]);let f=e=>{let t=e.slice(12),a=new Uint8Array(t.length+4);return a.set([0,0,0,1],0),a.set(t,4),a};return(0,r.jsx)("div",{children:(0,r.jsx)("video",{id:"player",style:{width:"800px",height:"350px",borderRadius:"10px"},controls:!0,autoPlay:!0,preload:"auto"})})};var h=a(95956);function u(){let[e,t]=(0,s.useState)(null),[a,i]=(0,s.useState)(""),[c,u]=(0,s.useState)(!1);return(0,r.jsxs)("div",{className:"p-4",children:[(0,r.jsx)("h1",{className:"text-3xl pb-5 text-[#14532d] font-bold",children:"Live "}),(0,r.jsx)("div",{className:"text-xl pb-2",children:"Filter"}),(0,r.jsx)("div",{className:"flex gap-5 pb-10 flex-col lg:flex-row",children:(0,r.jsxs)(l.ZP,{theme:{token:{colorPrimary:"#3da64a"}},children:[(0,r.jsx)(o.Z,{onChange:(e,a)=>{u(!1),t(a),a&&a.length>0?i(a.map(e=>e.label).join(" / ")):i("")}}),(0,r.jsx)(n.Z,{onClick:()=>{console.log("Filter clicked with location:",e),console.log("Selected location label:",a),e?u(!0):h.Am.error("Please select location to apply filter.")}})]})}),(0,r.jsx)("div",{className:"text-xl pb-2",children:"Live camera"}),(0,r.jsx)("div",{className:"flex justify-center",children:(0,r.jsx)(d,{selectedLocationLabel:a,filterCondition:c})})]})}},1883:(e,t,a)=>{"use strict";a.d(t,{Z:()=>n});var r=a(57437),l=a(74051),s=a(17715);a(2265);var o=a(95956);function n(e){let{onClick:t}=e;return(0,r.jsxs)(l.ZP,{theme:{token:{colorPrimary:"#3da64a"}},children:[(0,r.jsx)(s.ZP,{className:"w-[150px]",type:"primary",onClick:t,children:(0,r.jsx)("div",{className:"font-semibold",children:"Apply filter"})}),(0,r.jsx)(o.Ix,{})]})}a(53982)},74224:(e,t,a)=>{"use strict";a.d(t,{Z:()=>o});var r=a(57437),l=a(2265),s=a(93317);function o(e){let{onChange:t}=e,[a,o]=(0,l.useState)([]),n=async()=>{try{let e=await fetch("http://localhost:8004/"),t=await e.json();o(t),console.log(t)}catch(e){console.error("Error fetching data:",e)}};return(0,l.useEffect)(()=>{n()},[]),(0,r.jsx)("div",{className:"w-1/2",children:(0,r.jsx)(s.Z,{style:{width:"100%"},options:a.map(e=>({value:e.recordId,label:e.cameraName})),onChange:t,placeholder:"Location",showSearch:{filter:(e,t)=>t.some(t=>t.label.toLowerCase().indexOf(e.toLowerCase())>-1)},onSearch:e=>console.log(e)})})}}},e=>{var t=t=>e(e.s=t);e.O(0,[265,733,7,723,790,432,130,215,744],()=>t(84141)),_N_E=e.O()}]);